<!DOCTYPE html>
<head>
<meta charset="utf-8">
<style>
.state {
  fill: #fff;
  stroke: #000;
}
.airport {
  fill: steelblue;
}
</style>
</head>
<body>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<script src="http://d3js.org/queue.v1.min.js"></script>
<script>
var width = 800,
    height = 500;

var svg = d3.select("body").append("svg")
    .attr("height", height)
    .attr("width", width);

var projection = d3.geo.albersUsa()
    .translate([width / 2, height / 2])
    .scale([1000]);

var path = d3.geo.path()
    .projection(projection);

queue()
    .defer(d3.json, "http://www.cs.middlebury.edu/~candrews/classes/infovis/data/us-states.json")
    .defer(d3.json, "data/airports/airports.json")
    .await(plot);

function plot(error, states, airports) {
  svg.selectAll(".state")
      .data(states.features)
    .enter().append("path")
      .attr("class", "state")
      .attr("d", path);

  svg.selectAll(".airport")
      .data(airports)
    .enter().append("circle")
      .attr("class", "airport")
      .attr("cx", function(d) { return projection([d.longitude, d.latitude])[0]; })
      .attr("cy", function(d) { return projection([d.longitude, d.latitude])[1]; })
      .attr("r", 1);
}
</script>
</body>
